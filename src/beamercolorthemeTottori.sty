\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{beamercolorthemeTottori}[2016/07/04 Tottori color theme]
\mode<presentation>

\RequirePackage[most]{tcolorbox}

\setbeamercovered{transparent=.5}
\definecolor{basecolor}{HTML}{003D64}
\definecolor{alertedcolor}{HTML}{C05350}
\definecolor{examplecolor}{HTML}{76923C}
\setbeamercolor{title}{fg=white,bg=basecolor}
\setbeamercolor{title page}{fg=white,bg=basecolor}
\setbeamercolor{normal text}{fg=black}
\setbeamercolor{structure}{fg=basecolor}
\setbeamercolor{math text}{fg=black}
\setbeamercolor{separation line}{fg=red}
\setbeamercolor{footline}{fg=white,bg=basecolor!60!black}
\setbeamercolor{headline}{fg=white,bg=basecolor!60!black}
\setbeamercolor{frametitle}{fg=white,bg=basecolor}
\setbeamercolor{alerted text}{fg=alertedcolor!60!black}

\tcbset{%
    enhanced,
    noparskip,
    fonttitle=\bf,
    colback=gray!10,
    colframe=darkgray!80,
    coltext=black,
    coltitle=white,
    left=3pt, right=3pt,
    before upper={\setbeamercolor{local structure}{fg=darkgray!80}},
    alerted/.style={%
        coltitle=white, 
        colframe=alertedcolor,
        colback=alertedcolor!5!white,
        before upper={\setbeamercolor{local structure}{fg=alertedcolor}}
    },
    example/.style={%
        coltitle=white, 
        colframe=examplecolor,
        colback=examplecolor!5!white,
        before upper={\setbeamercolor{local structure}{fg=examplecolor}}
    },
    left=1mm,right=1mm,top=1mm,bottom=1mm
}

% https://github.com/josephwright/beamer/issues/322
\long\def\beamer@newenvnoopt#1#2#3#4{%
    \expandafter\renewcommand\expandafter<\expandafter>\csname#1\endcsname[#2]{#3}
    \expandafter\long\expandafter\def\csname end#1\endcsname{#4}%
}
\long\def\beamer@newenvopt#1#2[#3]#4#5{%
    \expandafter\renewcommand\expandafter<\expandafter>\csname#1\endcsname[#2][#3]{#4}
    \expandafter\long\expandafter\def\csname end#1\endcsname{#5}%
}

\renewenvironment<>{block}[1]
{\begin{tcolorbox}[title=#1]}
{\end{tcolorbox}}
\renewenvironment<>{exampleblock}[1]
{\begin{tcolorbox}[example, title=#1]}
{\end{tcolorbox}}
\renewenvironment<>{alertedblock}[1]
{\begin{tcolorbox}[alerted, title=#1]}
{\end{tcolorbox}}

\newcommand\setbasecolor[1]{\definecolor{basecolor}{HTML}{#1}}

\mode<all>
